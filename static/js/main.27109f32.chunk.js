(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(t,e,n){},112:function(t,e,n){},156:function(t,e,n){},157:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),s=n(2),c=n.n(s),u=(n(85),n(22)),i=n(23),o=n(25),l=n(24),d=n(26),m=n(8),h=n.n(m),f=(n(87),n(72)),v=n.n(f),k=n(73),p=n.n(k),g=function(t){var e=t.onSunnyClick,n=t.onClockClick;return a.createElement("div",{className:"nav"},a.createElement("span",{onClick:e},a.createElement("button",{className:"nav__button"},a.createElement("img",{src:v.a,alt:"schedule"}),a.createElement("span",{className:"nav__link"},"Current setting"))),a.createElement("span",{onClick:n},a.createElement("button",{className:"nav__button"},a.createElement("img",{src:p.a,alt:"sunny"}),a.createElement("span",{className:"nav__link"},"Schedule"))))},E=(n(88),n(14)),S=n.n(E);function C(t){return"/api".concat(t)}var b=n(74),_=n.n(b),O=(n(110),n(111),function(t){function e(){return Object(u.a)(this,e),Object(o.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return a.createElement(_.a,Object.assign({orientation:"vertical",min:0,max:100},this.props))}}]),e}(a.Component)),w=(n(112),function(t){var e=t.tasks,n=t.onClick,r=t.onCreate;return a.createElement("div",{className:"schedule--wrapper"},a.createElement("div",{onClick:function(){return r()},className:"task"},"ADD NEW"),e.map(function(t){return a.createElement("div",{key:t.id,onClick:function(){return n(t)},className:"task"},t.time.format("LT")," - ",t.value,"%")}))}),y=n(79),j=(n(155),n(156),function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={selectedTime:n.props.task.time,value:n.props.task.value},n}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this;return a.createElement("div",{className:"task-edit-wrapper"},a.createElement(y.a,{showSecond:!1,defaultValue:this.props.task.time,className:"task-edit task",onChange:function(e){return t.setState({selectedTime:e})},format:"h:mm a",use12Hours:!0,inputReadOnly:!0}),a.createElement(O,{value:this.state.value,onChange:function(e){return t.setState({value:e})}}),a.createElement("button",{onClick:this.props.onDelete,className:"button button--delete"},"Delete"),a.createElement("button",{onClick:function(){return t.props.onSave({scheduled_at:t.state.selectedTime.format("HH:mm:ss"),desired_value:t.state.value})},className:"button button--save"},"Save"))}}]),e}(a.Component)),H=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={currentRoute:"HOME",currentSetting:0,taskId:"null",lastSentSetting:0,tasks:[],light:null},n.getTasks=function(){return S.a.get(C("/tasks")).then(function(t){return t.data.data}).catch(console.log).then(function(t){return n.setState({tasks:t.map(function(t){return{id:t.id,value:t.desired_value,time:h()(t.scheduled_at,"HH:mm")}})})})},n.updateLightReading=function(){S.a.get(C("/settings/light_reading")).then(function(t){return t.data.data.value}).catch(console.log).then(function(t){n.setState({light:t}),setTimeout(n.updateLightReading,500)})},n.sendUpdatedCurrentSetting=function(){var t;n.state.lastSentSetting!==n.state.currentSetting&&(t=n.state.currentSetting,S.a.patch(C("/settings/custom_desired_value"),{value:t}).then(function(t){return t.data.data.value}).catch(console.log)).then(function(t){return n.setState({currentSetting:t,lastSentSetting:t})})},n}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;S.a.get(C("/settings/custom_desired_value")).then(function(t){return t.data.data.value}).catch(console.log).then(function(e){return t.setState({currentSetting:e})}),this.updateLightReading(),this.getTasks()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{id:"app"},"HOME"===this.state.currentRoute&&r.a.createElement("div",null,r.a.createElement("h2",null,this.state.light||"unknown"," lm"),r.a.createElement(O,{value:this.state.currentSetting,onChange:function(e){return t.setState({currentSetting:e})},onChangeComplete:function(){t.sendUpdatedCurrentSetting()}})),"SCHEDULE"===this.state.currentRoute&&r.a.createElement(w,{tasks:this.state.tasks,onClick:function(e){var n=e.id;return t.setState({currentRoute:"TASK_EDIT",taskId:n})},onCreate:function(){S.a.post(C("/tasks"),{task:{scheduled_at:"12:00:00",desired_value:50}}).then(function(t){return t.data.data}).catch(console.log).then(function(e){var n=e.id;return t.getTasks().then(function(){return t.setState({currentRoute:"TASK_EDIT",taskId:n})})})}}),"TASK_EDIT"===this.state.currentRoute&&r.a.createElement(j,{task:this.state.tasks.find(function(e){return e.id===t.state.taskId}),onDelete:function(){return(e=t.state.taskId,S.a.delete(C("/tasks/".concat(e)))).then(function(){return t.setState({tasks:t.state.tasks.filter(function(e){return e.id!==t.state.taskId}),currentRoute:"SCHEDULE"})});var e},onSave:function(e){var n,a;(n=t.state.taskId,a={task:e},S.a.patch(C("/tasks/".concat(n)),a).then(function(t){var e=t.data.data;return{id:e.id,value:e.desired_value,time:h()(e.scheduled_at,"HH:mm")}}).catch(console.log)).then(function(e){return t.setState({currentRoute:"SCHEDULE",tasks:t.state.tasks.map(function(n){return n.id===t.state.taskId?e:n})})})}}),r.a.createElement(g,{min:0,max:100,value:10,onSunnyClick:function(){return t.setState({currentRoute:"HOME"})},onClockClick:function(){return t.setState({currentRoute:"SCHEDULE"})}}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},72:function(t,e,n){t.exports=n.p+"static/media/schedule.3280ca9c.svg"},73:function(t,e,n){t.exports=n.p+"static/media/sunny.c9afe933.svg"},80:function(t,e,n){t.exports=n(157)},85:function(t,e,n){},87:function(t,e,n){},88:function(t,e,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.27109f32.chunk.js.map